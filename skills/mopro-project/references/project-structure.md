# Mopro Project Structure

Expected directory layout at each stage of the mopro lifecycle.

## After `mopro init`

```
my_zk_app/
├── Cargo.toml                    # Rust project manifest
├── Cargo.lock                    # Dependency lock file
├── src/
│   └── lib.rs                    # Prover wrapper functions + circuit macros
├── test-vectors/
│   ├── circom/                   # Circom circuit artifacts
│   │   ├── multiplier2_final.zkey    # Example proving key
│   │   └── multiplier2.wasm          # Example witness generator
│   ├── halo2/                    # Halo2 circuit artifacts
│   │   └── (SRS + key .bin files)
│   └── noir/                     # Noir circuit artifacts
│       └── (compiled .json files)
└── rust-toolchain.toml           # Rust version pinning (if present)
```

### Key Files

**`Cargo.toml`** — Dependencies include `mopro-ffi` with feature flags for
selected adapters:
```toml
[dependencies]
mopro-ffi = { version = "0.3", features = ["circom"] }
```

**`src/lib.rs`** — Contains circuit registration macros. Example for Circom:
```rust
use mopro_ffi::circom;

circom::set_circom_circuits! {
    ("multiplier2_final.zkey", circom::witness::witnesscalc::multiplier2::witness),
}
```

## After `mopro build` (iOS)

```
my_zk_app/
├── (all init files)
└── MoproiOSBindings/
    ├── mopro.swift               # Generated Swift bindings
    └── MoproBindings.xcframework/
        ├── Info.plist
        ├── ios-arm64/            # Device binary (if built)
        ├── ios-arm64_x86_64-simulator/  # Simulator binary
        └── (per-architecture slices)
```

## After `mopro build` (Android)

```
my_zk_app/
├── (all init files)
└── MoproAndroidBindings/
    ├── jniLibs/
    │   ├── arm64-v8a/
    │   │   └── libuniffi_mopro.so
    │   ├── armeabi-v7a/
    │   │   └── libuniffi_mopro.so
    │   ├── x86/
    │   │   └── libuniffi_mopro.so
    │   └── x86_64/
    │       └── libuniffi_mopro.so
    └── uniffi/
        └── mopro/
            └── mopro.kt          # Generated Kotlin bindings
```

Only architectures specified during build will have .so files.

## After `mopro build` (Flutter)

```
my_zk_app/
├── (all init files)
└── mopro_flutter_bindings/
    ├── pubspec.yaml              # Flutter plugin manifest
    ├── lib/
    │   └── src/
    │       └── rust/
    │           ├── frb_generated.dart
    │           └── third_party/
    │               └── mopro_example_app.dart
    ├── android/                  # Android native libs
    └── ios/                      # iOS framework
```

## After `mopro build` (React Native)

```
my_zk_app/
├── (all init files)
└── MoproReactNativeBindings/
    ├── package.json              # npm package manifest
    ├── src/
    │   └── (Turbo Module bindings)
    ├── android/                  # Android JNI bindings
    └── ios/                      # iOS framework bindings
```

## After `mopro build` (Web/WASM)

```
my_zk_app/
├── (all init files)
└── MoproWasmBindings/
    ├── mopro_wasm_lib.js         # JavaScript entry point
    ├── mopro_wasm_lib_bg.wasm    # WASM binary
    └── (additional JS/WASM glue files)
```

## After `mopro create`

Creates a complete app project in a new directory. Example for iOS:

```
my_zk_app/
├── (all init + build files)
└── ios-app/                      # Generated by mopro create
    ├── MyApp.xcodeproj/
    ├── MyApp/
    │   ├── ContentView.swift     # Main view with prove/verify buttons
    │   ├── Assets.xcassets/
    │   └── (standard Xcode files)
    └── MoproiOSBindings/         # Copied bindings
```

## Circuit Artifact Locations

Place your circuit files in the appropriate test-vectors subdirectory:

| Adapter | Directory | File Types |
|---------|-----------|------------|
| Circom | `test-vectors/circom/` | `.zkey`, `.wasm` |
| Halo2 | `test-vectors/halo2/` | `_srs.bin`, `_pk.bin`, `_vk.bin` |
| Noir | `test-vectors/noir/` | `.json` |

The default init includes example circuits (multiplier2 for Circom/Noir,
fibonacci variants for Halo2) for quick testing.
